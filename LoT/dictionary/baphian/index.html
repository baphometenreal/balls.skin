<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turku Baphian Dictionary</title>
	<style>
	@font-face {
	  font-family: 'ukilen';
	  src: url("/font/UkilenLg.otf");
	}	
	.entry:after {
		font-family: 'ukilen';
		content: "";
	}
	.entry {
		font-family: 'ukilen';
		text-decoration: none;
		font-size:32px
	}
	</style>
	<link href="" rel="stylesheet" type="text/css" media="screen" id="font-link">
    <link href="" rel="stylesheet" type="text/css" media="screen" id="theme-link">
  </head>
  <body>
	<div class="main2">
		<h1>Turku Baphian Dictionary</h1>
		<div name="dictionary" id="dictionary">
		
		</div>
	</div>
	
    <br><br><br>
	<p id="footer"></p>
	<script src="papaparse.min.js"></script>
	<script>
		//PAPA Parser (https://www.papaparse.com/) used to convert TEXT to CSV
		function readFile() {  
		  var reader = new FileReader();
		
		  // document.getElementById('errorMessage').innerHTML = ""	  
		  fetch("words.csv")
		  .then(res => res.blob()) // Gets the response and returns it as a blob
		  .then(blob => {
			var content = reader.readAsText(blob);
		});

		  reader.onload = function () {
			var data = Papa.parse(reader.result, { header: false });

			if (data.errors.length) {
			  // document.getElementById('errorMessage').innerHTML = "* Error parsing CSV: " + JSON.stringify(data.errors)      
			  console.error(data.errors)
			} else {
			  console.log("Loaded dictionary")
			  dictData = Object.entries(data)[0][1]

			  var totalEntries = ""
			  
			  for (var i = 0; i < dictData.length; i++) { 
				var english = dictData[i][0]
				var baphian = dictData[i][1]
				var type = dictData[i][2]
				var extra = dictData[i][3]
				var notes = dictData[i][4]
			  
				var indEntry = ""
				
				if ((type == "") && (notes == "")) {
					indEntry = "<p>" + english + ": <font style='font-size:32px; font-family:ukilen; '>" + baphian.replaceAll("\'", "'") + "</font>"
					if (extra) { indEntry +=  " <i>(" + extra + ")</i>" }
					indEntry += "</p>"
				} else if  ((type == "") && (notes != "")) {
					indEntry = "<p>" + english + ": <font style='font-size:32px; font-family:ukilen; '><a href=\"#\" onclick=\"grammar('" + english + "', '" + baphian + "', '" + type + "', '" + notes + "');\" class=\"entry\">" + baphian + "</a></font>"
					if (extra) { indEntry +=  " <i>(" + extra + ", see notes)</i>" } else {indEntry +=  " <i>(see notes)</i>" }
					indEntry += "</p>"
				} else {
					var prettyArt = type
					
					switch (type) {
						case "an":
							prettyArt = "animate noun"
							break;
						case "inan":
							prettyArt = "inanimate noun"
							break;
						case "adj":
							prettyArt = "adjective"
							break;
						case "verb":
							prettyArt = "verb"
							break;
						case "prn":
							prettyArt = "pronoun"
							break;
					}
					
					indEntry = "<p>" + english + ": <font style='font-size:32px; font-family:ukilen;'><a href=\"#\" onclick=\"grammar('" + english + "', '" + baphian + "', '" + type + "', '" + notes + "');\" class=\"entry\">" + baphian + "</a></font> <i>(" + prettyArt
					if (extra) { indEntry +=  ", " + extra + ""}
					if (notes) { indEntry +=  ", see notes"}
					indEntry += ")</i></p>"
				}
			  
				totalEntries += indEntry
			  }
			  document.getElementById("dictionary").innerHTML = totalEntries
			}
		  };
		}
		
		function grammar(english, baphian, type, notes) {
			if (type == "") {openNewPage( "<span class='ukilen'>" + baphian + "</span> \"" + english + "\"", "", notes); return}
			
			var tabelle = ""
			
			switch (type) { // inflection types go here
				// NOUN INFLECTION GOES HERE
				case "an":
				case "inan":
				case "adj":
				case "prn":
					var nomSg = baphian;
					var accSg = baphian + ""
					var datSg = baphian + ""
					var genSg = baphian + ""
					var ablSg = baphian + ""
					var vocSg = baphian + ""
					var locSg = baphian + ""
					
					var nomDu = nomSg + ""
					var accDu = accSg + ""
					var datDu = datSg + ""
					var genDu = genSg + ""
					var ablDu = ablSg + ""
					var vocDu = vocSg + ""
					var locDu = locSg + ""
					
					var nomPl = nomSg + ""
					var accPl = accSg + ""
					var datPl = datSg + ""
					var genPl = genSg + ""
					var ablPl = ablSg + ""
					var vocPl = vocSg + ""
					var locPl = locSg + ""
					
					if (baphian == "" || baphian == "") {
						tabelle = "<table><tr><th></th><th>Singular</th><th>Plural</th></tr>"
						tabelle += "<tr><th>Nominative</th><td class=\"ukilen\">" + nomSg + "</td><td class=\"ukilen\">" + nomPl + "</td></tr>"
						tabelle += "<tr><th>Accusative</th><td class=\"ukilen\">" + accSg + "</td><td class=\"ukilen\">" + accPl + "</td></tr>"
						tabelle += "<tr><th>Dative</th><td class=\"ukilen\">" + datSg + "</td><td class=\"ukilen\">" + datPl + "</td></tr>"
						tabelle += "<tr><th>Genitive</th><td class=\"ukilen\">" + genSg + "</td><td class=\"ukilen\">" + genPl + "</td></tr>"
						tabelle += "<tr><th>Ablative</th><td class=\"ukilen\">" + ablSg + "</td><td class=\"ukilen\">" + ablPl + "</td></tr>"
						tabelle += "<tr><th>Vocative</th><td class=\"ukilen\">" + vocSg + "</td><td class=\"ukilen\">" + vocPl + "</td></tr>"
						tabelle += "<tr><th>Locative</th><td class=\"ukilen\">" + locSg + "</td><td class=\"ukilen\">" + locPl + "</td></tr>"
					} else {
						tabelle = "<table><tr><th></th><th>Singular</th><th>Dual</th><th>Plural</th></tr>"
						tabelle += "<tr><th>Nominative</th><td class=\"ukilen\">" + nomSg + "</td><td class=\"ukilen\">" + nomDu + "</td><td class=\"ukilen\">" + nomPl + "</td></tr>"
						tabelle += "<tr><th>Accusative</th><td class=\"ukilen\">" + accSg + "</td><td class=\"ukilen\">" + accDu + "</td><td class=\"ukilen\">" + accPl + "</td></tr>"
						tabelle += "<tr><th>Dative</th><td class=\"ukilen\">" + datSg + "</td><td class=\"ukilen\">" + datDu + "</td><td class=\"ukilen\">" + datPl + "</td></tr>"
						tabelle += "<tr><th>Genitive</th><td class=\"ukilen\">" + genSg + "</td><td class=\"ukilen\">" + genDu + "</td><td class=\"ukilen\">" + genPl + "</td></tr>"
						tabelle += "<tr><th>Ablative</th><td class=\"ukilen\">" + ablSg + "</td><td class=\"ukilen\">" + ablDu + "</td><td class=\"ukilen\">" + ablPl + "</td></tr>"
						tabelle += "<tr><th>Vocative</th><td class=\"ukilen\">" + vocSg + "</td><td class=\"ukilen\">" + vocDu + "</td><td class=\"ukilen\">" + vocPl + "</td></tr>"
						tabelle += "<tr><th>Locative</th><td class=\"ukilen\">" + locSg + "</td><td class=\"ukilen\">" + locDu + "</td><td class=\"ukilen\">" + locPl + "</td></tr>"
					}
						tabelle += "</table>"
					break;
				case "verb":
					var FrpPrfPos = baphian + ""
					var PasPrfPos = baphian + ""
					var PrePrfPos = baphian
					var FutPrfPos = baphian + ""
					var FrpPrfNeg = baphian + ""
					var PasPrfNeg = baphian + ""
					var PrePrfNeg = baphian + ""
					var FutPrfNeg = baphian + ""
					
					var FrpImpPos = baphian + ""
					var PasImpPos = baphian + ""
					var PreImpPos = baphian + ""
					var FutImpPos = baphian + ""
					var FrpImpNeg = baphian + ""
					var PasImpNeg = baphian + ""
					var PreImpNeg = baphian + ""
					var FutImpNeg = baphian + ""
					
					var FrpConPos = baphian + ""
					var PasConPos = baphian + ""
					var PreConPos = baphian + ""
					var FutConPos = baphian + ""
					var FrpConNeg = baphian + ""
					var PasConNeg = baphian + ""
					var PreConNeg = baphian + ""
					var FutConNeg = baphian + ""
					
					var FrpHabPos = baphian + ""
					var PasHabPos = baphian + ""
					var PreHabPos = baphian + ""
					var FutHabPos = baphian + ""
					var FrpHabNeg = baphian + ""
					var PasHabNeg = baphian + ""
					var PreHabNeg = baphian + ""
					var FutHabNeg = baphian + ""
					
					tabelle = "<table><tbody><tr><th rowspan=\"2\"></th><th colspan=\"2\">Perfect</th><th colspan=\"2\">Imperfect</th><th colspan=\"2\">Conditional</th><th colspan=\"2\">Habitual</th></tr><tr><th>Positive</th><th>Negative</th><th>Positive</th><th>Negative</th><th>Positive</th><th>Negative</th><th>Positive</th><th>Negative</th></tr>"
					tabelle += "<tr><th>Far past / Non-temporal</th><td class=\"ukilen\">" + FrpPrfPos + "</td><td class=\"ukilen\">" + FrpPrfNeg + "</td><td class=\"ukilen\">" + FrpImpPos + "</td><td class=\"ukilen\">" + FrpImpNeg + "</td><td class=\"ukilen\">" + FrpConPos + "</td><td class=\"ukilen\">" + FrpConNeg + "</td><td class=\"ukilen\">" + FrpHabPos + "</td><td class=\"ukilen\">" + FrpHabNeg + "</td></tr>"
					tabelle += "<tr><th>Past</th><td class=\"ukilen\">" + PasPrfPos + "</td><td class=\"ukilen\">" + PasPrfNeg + "</td><td class=\"ukilen\">" + PasImpPos + "</td><td class=\"ukilen\">" + PasImpNeg + "</td><td class=\"ukilen\">" + PasConPos + "</td><td class=\"ukilen\">" + PasConNeg + "</td><td class=\"ukilen\">" + PasHabPos + "</td><td class=\"ukilen\">" + PasHabNeg + "</td></tr>"
					tabelle += "<tr><th>Present</th><td class=\"ukilen\">" + PrePrfPos + "</td><td class=\"ukilen\">" + PrePrfNeg + "</td><td class=\"ukilen\">" + PreImpPos + "</td><td class=\"ukilen\">" + PreImpNeg + "</td><td class=\"ukilen\">" + PreConPos + "</td><td class=\"ukilen\">" + PreConNeg + "</td><td class=\"ukilen\">" + PreHabPos + "</td><td class=\"ukilen\">" + PreHabNeg + "</td></tr>"
					tabelle += "<tr><th>Future</th><td class=\"ukilen\">" + FutPrfPos + "</td><td class=\"ukilen\">" + FutPrfNeg + "</td><td class=\"ukilen\">" + FutImpPos + "</td><td class=\"ukilen\">" + FutImpNeg + "</td><td class=\"ukilen\">" + FutConPos + "</td><td class=\"ukilen\">" + FutConNeg + "</td><td class=\"ukilen\">" + FutHabPos + "</td><td class=\"ukilen\">" + FutHabNeg + "</td></tr>"
					tabelle += "</table>"
					
					var nomSgNom = baphian + "";
					var accSgNom = baphian + ""
					var datSgNom = baphian + ""
					var genSgNom = baphian + ""
					var ablSgNom = baphian + ""
					var vocSgNom = baphian + ""
					var locSgNom = baphian + ""
					
					var nomDuNom = nomSgNom + ""
					var accDuNom = accSgNom + ""
					var datDuNom = datSgNom + ""
					var genDuNom = genSgNom + ""
					var ablDuNom = ablSgNom + ""
					var vocDuNom = vocSgNom + ""
					var locDuNom = locSgNom + ""
					
					var nomPlNom = nomSgNom + ""
					var accPlNom = accSgNom + ""
					var datPlNom = datSgNom + ""
					var genPlNom = genSgNom + ""
					var ablPlNom = ablSgNom + ""
					var vocPlNom = vocSgNom + ""
					var locPlNom = locSgNom + ""
					
					tabelle += "<p>Nominalisation:</p><table><tr><th></th><th>Singular</th><th>Dual</th><th>Plural</th></tr>"
					tabelle += "<tr><th>Nominative</th><td class=\"ukilen\">" + nomSgNom + "</td><td class=\"ukilen\">" + nomDuNom + "</td><td class=\"ukilen\">" + nomPlNom + "</td></tr>"
					tabelle += "<tr><th>Accusative</th><td class=\"ukilen\">" + accSgNom + "</td><td class=\"ukilen\">" + accDuNom + "</td><td class=\"ukilen\">" + accPlNom + "</td></tr>"
					tabelle += "<tr><th>Dative</th><td class=\"ukilen\">" + datSgNom + "</td><td class=\"ukilen\">" + datDuNom + "</td><td class=\"ukilen\">" + datPlNom + "</td></tr>"
					tabelle += "<tr><th>Genitive</th><td class=\"ukilen\">" + genSgNom + "</td><td class=\"ukilen\">" + genDuNom + "</td><td class=\"ukilen\">" + genPlNom + "</td></tr>"
					tabelle += "<tr><th>Ablative</th><td class=\"ukilen\">" + ablSgNom + "</td><td class=\"ukilen\">" + ablDuNom + "</td><td class=\"ukilen\">" + ablPlNom + "</td></tr>"
					tabelle += "<tr><th>Vocative</th><td class=\"ukilen\">" + vocSgNom + "</td><td class=\"ukilen\">" + vocDuNom + "</td><td class=\"ukilen\">" + vocPlNom + "</td></tr>"
					tabelle += "<tr><th>Locative</th><td class=\"ukilen\">" + locSgNom + "</td><td class=\"ukilen\">" + locDuNom + "</td><td class=\"ukilen\">" + locPlNom + "</td></tr>"
					tabelle += "</table>"
					
					var nomSgAgn = baphian + "";
					var accSgAgn = baphian + ""
					var datSgAgn = baphian + ""
					var genSgAgn = baphian + ""
					var ablSgAgn = baphian + ""
					var vocSgAgn = baphian + ""
					var locSgAgn = baphian + ""
					
					var nomDuAgn = nomSgAgn + ""
					var accDuAgn = accSgAgn + ""
					var datDuAgn = datSgAgn + ""
					var genDuAgn = genSgAgn + ""
					var ablDuAgn = ablSgAgn + ""
					var vocDuAgn = vocSgAgn + ""
					var locDuAgn = locSgAgn + ""
					
					var nomPlAgn = nomSgAgn + ""
					var accPlAgn = accSgAgn + ""
					var datPlAgn = datSgAgn + ""
					var genPlAgn = genSgAgn + ""
					var ablPlAgn = ablSgAgn + ""
					var vocPlAgn = vocSgAgn + ""
					var locPlAgn = locSgAgn + ""
					
					tabelle += "<p>Agentive:</p><table><tr><th></th><th>Singular</th><th>Dual</th><th>Plural</th></tr>"
					tabelle += "<tr><th>Nominative</th><td class=\"ukilen\">" + nomSgAgn + "</td><td class=\"ukilen\">" + nomDuAgn + "</td><td class=\"ukilen\">" + nomPlAgn + "</td></tr>"
					tabelle += "<tr><th>Accusative</th><td class=\"ukilen\">" + accSgAgn + "</td><td class=\"ukilen\">" + accDuAgn + "</td><td class=\"ukilen\">" + accPlAgn + "</td></tr>"
					tabelle += "<tr><th>Dative</th><td class=\"ukilen\">" + datSgAgn + "</td><td class=\"ukilen\">" + datDuAgn + "</td><td class=\"ukilen\">" + datPlAgn + "</td></tr>"
					tabelle += "<tr><th>Genitive</th><td class=\"ukilen\">" + genSgAgn + "</td><td class=\"ukilen\">" + genDuAgn + "</td><td class=\"ukilen\">" + genPlAgn + "</td></tr>"
					tabelle += "<tr><th>Ablative</th><td class=\"ukilen\">" + ablSgAgn + "</td><td class=\"ukilen\">" + ablDuAgn + "</td><td class=\"ukilen\">" + ablPlAgn + "</td></tr>"
					tabelle += "<tr><th>Vocative</th><td class=\"ukilen\">" + vocSgAgn + "</td><td class=\"ukilen\">" + vocDuAgn + "</td><td class=\"ukilen\">" + vocPlAgn + "</td></tr>"
					tabelle += "<tr><th>Locative</th><td class=\"ukilen\">" + locSgAgn + "</td><td class=\"ukilen\">" + locDuAgn + "</td><td class=\"ukilen\">" + locPlAgn + "</td></tr>"
					tabelle += "</table>"
					break;
				case "prn":
					tabelle = "Inflection table WIP"
				default:
					break;
			}
			
			openNewPage("<span class='ukilen'>" + baphian + "</span> \"" + english + "\"", tabelle, notes)
		}
	
		function openNewPage(title, content, notes) {
		  var opened = window.open("");
		  opened.document.write("<html><head><title>" + title + "</title><link href=\"\" rel=\"stylesheet\" type=\"text/css\" media=\"screen\" id=\"font-link\"><link href=\"\" rel=\"stylesheet\" type=\"text/css\" media=\"screen\" id=\"theme-link\"><style>table {width: auto;} table, th, td { border: 1px solid;} th, td {  width: 120px; text-align: center; white-space: nowrap;} @font-face{font-family: 'ukilen';src: url(\"/font/UkilenLg.otf\");} .ukilen{font-family:'ukilen'}</style></head><div class=\"main2\"><h2>" + title + "</h2><body><p>" + content + "</p>" + (notes != "" ? "<h3>Notes</h3><p>" + (notes).replaceAll("“", "\"").replaceAll("”", "\"") + "</p>" : "") + "</div><script src=\"/js.js\"><\/script></body></html>");
		}
		
		readFile()
	</script>
	<script src="/js.js"></script>
  </body>
</html>
