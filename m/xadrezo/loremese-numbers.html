<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loremese numbers</title>
<link href="./css.css" rel="stylesheet" type="text/css" media="all">
<style>
	td { text-align: left}
	input { text-align: right}
</style>
</head><body class="secondary prog">
<section id="base">
<h1>Loremese numbers</h1>
<form name="baseform">
<input type="number" name="baseNumber" min="0" oninput="convertName();" value="0"/><br><br>
<text size="+6" id="output"></text>
</form>
</section>
<script>
	function nextBiggest102n(x) {
		var pw = 0;
		while (x >= (10 ** (2 ** pw))) {
			pw += 1
		}
		return Math.max(1, (2 ** pw))
	}
	
	function nameCleanupSmall(name) {
		if (name.slice(0, 4) == "oino ") {name = name.slice(4)}
		if (name.slice(-5) == " noilo") {name = name.slice(0, -5)}
		
		return name
	}
	
	function teenTy(name) {
		var rep = [["oino sveçcelésario", "oino sveçcelésaria"],
					["dvos sveçcelésario", "dva sveçcelésaria"],
					["treis sveçcelésario", "tria sveçcelésaria"],
					["cetre sveçcelésario", "cetre sveçcelésaria"],
					["pence sveçcelésario", "pence sveçcelésaria"],
					["sveç sveçcelésario", "sveç sveçcelésaria"],
					["septa sveçcelésario", "septa sveçcelésaria"],
					["oçto sveçcelésario", "oçto sveçcelésaria"],
					["enava sveçcelésario", "enava sveçcelésaria"],
					["deçat sveçcelésario", "deçat sveçcelésaria"],
					["çato sveçcelésario", "çato sveçcelésaria"],
					["sauceles sveçcelésario", "sauceles sveçcelésaria"],
					["saucelésario sveçcelésario", "saucelésario sveçcelésaria"],
					["dvicelésario sveçcelésario", "dvicelésario sveçcelésaria"],
					["tricelésario sveçcelésario", "tricelésario sveçcelésaria"],
					["cetricelésario sveçcelésario", "cetricelésario sveçcelésaria"],
					["pencecelésario sveçcelésario", "pencecelésario sveçcelésaria"],
					
					["oino pencecelésario", "oino pencecelésaria"],
					["dvos pencecelésario", "dva pencecelésaria"],
					["treis pencecelésario", "tria pencecelésaria"],
					["cetre pencecelésario", "cetre pencecelésaria"],
					["pence pencecelésario", "pence pencecelésaria"],
					["sveç pencecelésario", "sveç pencecelésaria"],
					["septa pencecelésario", "septa pencecelésaria"],
					["oçto pencecelésario", "oçto pencecelésaria"],
					["enava pencecelésario", "enava pencecelésaria"],
					["deçat pencecelésario", "deçat pencecelésaria"],
					["çato pencecelésario", "çato pencecelésaria"],
					["sauceles pencecelésario", "sauceles pencecelésaria"],
					["saucelésario pencecelésario", "saucelésario pencecelésaria"],
					["dvicelésario pencecelésario", "dvicelésario pencecelésaria"],
					["tricelésario pencecelésario", "tricelésario pencecelésaria"],
					["cetricelésario pencecelésario", "cetricelésario pencecelésaria"],
		
					["oino cetricelésario", "oino cetricelésaria"],
					["dvos cetricelésario", "dva cetricelésaria"],
					["treis cetricelésario", "tria cetricelésaria"],
					["cetre cetricelésario", "cetre cetricelésaria"],
					["pence cetricelésario", "pence cetricelésaria"],
					["sveç cetricelésario", "sveç cetricelésaria"],
					["septa cetricelésario", "septa cetricelésaria"],
					["oçto cetricelésario", "oçto cetricelésaria"],
					["enava cetricelésario", "enava cetricelésaria"],
					["deçat cetricelésario", "deçat cetricelésaria"],
					["çato cetricelésario", "çato cetricelésaria"],
					["sauceles cetricelésario", "sauceles cetricelésaria"],
					["saucelésario cetricelésario", "saucelésario cetricelésaria"],
					["dvicelésario cetricelésario", "dvicelésario cetricelésaria"],
					["tricelésario cetricelésario", "tricelésario cetricelésaria"],
					
					["oino tricelésario", "oino tricelésaria"],
					["dvos tricelésario", "dva tricelésaria"],
					["treis tricelésario", "tria tricelésaria"],
					["cetre tricelésario", "cetre tricelésaria"],
					["pence tricelésario", "pence tricelésaria"],
					["sveç tricelésario", "sveç tricelésaria"],
					["septa tricelésario", "septa tricelésaria"],
					["oçto tricelésario", "oçto tricelésaria"],
					["enava tricelésario", "enava tricelésaria"],
					["deçat tricelésario", "deçat tricelésaria"],
					["çato tricelésario", "çato tricelésaria"],
					["sauceles tricelésario", "sauceles tricelésaria"],
					["saucelésario tricelésario", "saucelésario tricelésaria"],
					["dvicelésario tricelésario", "dvicelésario tricelésaria"],
		
					["oino dvicelésario", "oino dvicelésaria"],
					["dvos dvicelésario", "dva dvicelésaria"],
					["treis dvicelésario", "tria dvicelésaria"],
					["cetre dvicelésario", "cetre dvicelésaria"],
					["pence dvicelésario", "pence dvicelésaria"],
					["sveç dvicelésario", "sveç dvicelésaria"],
					["septa dvicelésario", "septa dvicelésaria"],
					["oçto dvicelésario", "oçto dvicelésaria"],
					["enava dvicelésario", "enava dvicelésaria"],
					["deçat dvicelésario", "deçat dvicelésaria"],
					["çato dvicelésario", "çato dvicelésaria"],
					["sauceles dvicelésario", "sauceles dvicelésaria"],
					["saucelésario dvicelésario", "saucelésario dvicelésaria"],
					
					["oino saucelésario", "oino saucelésaria"],
					["dvos saucelésario", "dva saucelésaria"],
					["treis saucelésario", "tria saucelésaria"],
					["cetre saucelésario", "cetre saucelésaria"],
					["pence saucelésario", "pence saucelésaria"],
					["sveç saucelésario", "sveç saucelésaria"],
					["septa saucelésario", "septa saucelésaria"],
					["oçto saucelésario", "oçto saucelésaria"],
					["enava saucelésario", "enava saucelésaria"],
					["deçat saucelésario", "deçat saucelésaria"],
					["çato saucelésario", "çato saucelésaria"],
					["sauceles saucelésario", "sauceles saucelésaria"],
					
					["oino sauceles", "oino saucelesa"],
					["dvos sauceles", "dva saucelesa"],
					["treis sauceles", "tria saucelesa"],
					["cetre sauceles", "cetre saucelesa"],
					["pence sauceles", "pence saucelesa"],
					["sveç sauceles", "sveç saucelesa"],
					["septa sauceles", "septa saucelesa"],
					["oçto sauceles", "oçto saucelesa"],
					["enava sauceles", "enava saucelesa"],
					["deçat sauceles", "deçat saucelesa"],
					["çato sauceles", "çato saucelesa"],
					
					["deçat çato", "zelo"],
					["dvos deçat", "dviçont"],
					["treis deçat", "triçont"],
					["cetre deçat", "cetriçont"],
					["pence deçat", "penceçont"],
					["sveç deçat", "sveçont"],
					["septa deçat", "septaçont"],
					["oçto deçat", "oçtoçont"],
					["enava deçat", "enavaçont"],
					["é", "e"],
					]
		
		for (let i = 0; i < rep.length; i++) {
			name = name.replaceAll(rep[i][0], rep[i][1])
		}
		
		return name
	}
	
	function nameCleanup(name) {
		for (let i = 0; i < name.length; i++) {
			if (name[i] == ["oino"] || name[i] == "oino") {
				if (i != name.length - 1) {
					name[i] = ""
				}
			} else if (name[i] == ["noilo"] || name[i] == "noilo") {
				if (i != name.length - 1) {
					name[i] = ""
					name[i+1] = ""
				} else if (name.filter((str) => str !== '').length != 1) {
					name[i] = ""
				}
			}
		}
		
		if (typeof(name) === 'string') {return name}
		
		return name.filter((str) => str !== '')
	}
	
	function iterativeConvert(x) {
		if (x.length == 1) {
			var dict = {
						"0": "noilo",
						"1": "oino",
						"2": "dvos",
						"3": "treis",
						"4": "cetre",
						"5": "pence",
						"6": "sveç",
						"7": "septa",
						"8": "oçto",
						"9": "enava",
			};
			
			return dict[x]
		} else {
			var dict = {
				2: "deçat",
				4: "çato",
				8: "sauceles",
				16: "saucelésario",
				32: "dvicelésario",
				64: "tricelésario",
				128: "cetricelésario",
				256: "pencecelésario",
				512: "sveçcelésario",
			};
			
			var split1 = x.slice(0, x.length / 2)
			var split2 = x.slice(-1 * (x.length / 2))
			
			return nameCleanup([nameCleanup(iterativeConvert(split1)), dict[x.length], nameCleanup(iterativeConvert(split2))])
		}
	}
	
	function toStringWithSeparators(n) {
		SEPARATORS = [",", ";", ":", "'", "\"", "‴", "⁗"];
		
		let s = n.toString();
		for (let i = s.length - 4, j = 1; i > 0; i -= 4, j++) {
			const k = Math.min(numTrailingZeros(j), SEPARATORS.length - 1);
			s = s.substring(0, i) + SEPARATORS[k] + s.substring(i);
		}
		return s;
	}
		
	function numTrailingZeros(n) {
		if (n == 0 || Math.floor(n) != n)
			throw new RangeError();
		let result = 0;
		for (; (n & 1) == 0; n >>>= 1)
			result++;
		return result;
	}
	
	function convertName() {
		var numero = String(baseform.baseNumber.value)
		
		if (parseInt(numero).toString() == "NaN") {document.getElementById("output").innerHTML = "Error"; return}
		numero = String(baseform.baseNumber.value).replace(/^0+/,"")
		if (numero == "") {numero = "0"}
		
		var biggerBase = nextBiggest102n(parseInt(baseform.baseNumber.value))
		
		var paddedString = ("0".repeat((biggerBase) - (numero).length)).concat("", String(numero))
		
		var rawString = [(iterativeConvert(paddedString))]

		rawString = nameCleanupSmall(rawString.flat(Infinity).join(' '))

		document.getElementById("output").innerHTML = toStringWithSeparators(numero) + "<br><b>" + teenTy(rawString)
	}
	
	convertName()
</script>
</body></html>